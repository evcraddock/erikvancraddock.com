---
import type { CollectionEntry } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';

interface Props {
  post: CollectionEntry<'article'>;
}

const { post } = Astro.props;
const heroImage = {
  location: '/no-image.png',
  name: 'no image',
}

if (post.data && post.data.banner) {
  heroImage.location = post.data.banner
  heroImage.name = post.data.title
}
const postLink = `/${post.data.date.getFullYear()}/${post.data.date.getMonth() + 1}/${post.slug}`;

---
<div class="flex lg:w-1/2 xl:w-1/3 flex-wrap group cursor-pointer p-2 bg-slate-500 ">
  <div class="w-full xl:p-2 md:p-0 mb-0">
    <a href={postLink}>
      <img
        alt="gallery"
        class="block lg:h-64 rounded-lg object-cover object-center mt-0 mb-3"
        src={heroImage.location} />
    </a>
    <a href={postLink} >
        <span class="inline-block text-md font-medium tracking-wider uppercase underline mt-0 text-slate-100">
          {post.data.title}
        </span>
    </a>
    <div>
    <span class="flex items-center space-x-3">
      { post.data.tags && post.data.tags.map((tag: any) => {
        return (
        <a href={`/${tag}/`}>
          <span class="inline-block text-xs font-medium tracking-wider uppercase mt-0 text-slate-100">
            {tag}
          </span>
        </a>
        )})
      }
    </span>
    <span class="mt-0 flex items-center space-x-3 text-slate-100">
      <span class="flex items-center gap-1 h-1">
        <span class="hidden xl:block truncate text-sm">Erik Craddock</span>
          <span>-</span>
        </span>
      <span>
        <FormattedDate date={post.data.date} />
      </span>
    </span>
    </div>
  </div>
</div>
